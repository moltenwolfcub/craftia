scoreboard players enable @a[tag=panda] panda_cannon_get
scoreboard players enable @a[tag=panda] panda_cannon_mod

give @a[tag=panda,scores={panda_cannon_get=1..}] crossbow{Unbreakable:1b,display:{Name:'{"text": "Potion Panda Potion Cannon"}'},CustomModelData:2,Enchantments:[{id:"quick_charge",lvl:5}]}
scoreboard players set @a[tag=panda,scores={panda_cannon_get=1..}] panda_cannon_get 0

execute at @e[scores={panda_cannon_mod=0},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ 
execute at @e[scores={panda_cannon_mod=1},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:22,Amplifier:4,Duration:100,ShowParticles:0b}],CustomPotionColor:852214,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=2},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:31,Duration:1200,ShowParticles:0b}],CustomPotionColor:1735202,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=3},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:15,Duration:100,ShowParticles:0b}],CustomPotionColor:2092,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=4},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:29,Duration:600,ShowParticles:0b}],CustomPotionColor:47257,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=5},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:30,Duration:200,ShowParticles:0b}],CustomPotionColor:6656151,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=6},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:12,Duration:1200,ShowParticles:0b}],CustomPotionColor:15111209,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=7},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:24,Duration:200,ShowParticles:0b}],CustomPotionColor:6257755,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=8},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:3,Amplifier:1,Duration:400,ShowParticles:0b}],CustomPotionColor:15325972,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=9},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:21,Amplifier:4,Duration:400}],CustomPotionColor:13194514,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=10},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:32,Amplifier:3,Duration:1200}],CustomPotionColor:1104666,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=11},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:17,Amplifier:4,Duration:120}],CustomPotionColor:4932148,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=12},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:7,Amplifier:2}],CustomPotionColor:5242880,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=13},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:6,Amplifier:2}],CustomPotionColor:16711680,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=14},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:14,Duration:400}],CustomPotionColor:6984350,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=15},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:8,Amplifier:2,Duration:600}],CustomPotionColor:3407616,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=16},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:25,Amplifier:4,Duration:200}],CustomPotionColor:8243621,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=17},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:26,Amplifier:9,Duration:1200}],CustomPotionColor:2529034,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=18},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:4,Amplifier:5,Duration:200}],CustomPotionColor:3347971,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=19},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:9,Duration:1200}],CustomPotionColor:3882776,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=20},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:16,Duration:1200}],CustomPotionColor:1279,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=21},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:19,Amplifier:4,Duration:1200}],CustomPotionColor:3304970,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=22},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:10,Amplifier:1,Duration:400}],CustomPotionColor:15401069,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=23},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:11,Duration:600}],CustomPotionColor:8720400,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=24},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:23,Amplifier:2}],CustomPotionColor:16711680,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=25},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:28,Duration:200}],CustomPotionColor:14671295,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=26},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:2,Amplifier:9,Duration:1200}],CustomPotionColor:5535616,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=27},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:1,Amplifier:1,Duration:1200}],CustomPotionColor:7710129,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=28},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:5,Amplifier:3,Duration:200}],CustomPotionColor:7208960,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=29},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:27,Amplifier:9,Duration:1200}],CustomPotionColor:10714435,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=30},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:13,Duration:600}],CustomPotionColor:6305,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=31},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:18,Amplifier:1,Duration:1200}],CustomPotionColor:3881787,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={panda_cannon_mod=32},tag=panda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:20,Amplifier:2,Duration:80}],CustomPotionColor:1441792,display:{Name:'"Potion Cannon"'}}}}

execute as @e[type=minecraft:potion] at @s run data modify entity @s Motion set from entity @e[type=minecraft:arrow,distance=0,limit=1] Motion
execute as @e[type=minecraft:potion] at @s run kill @e[type=minecraft:arrow,distance=0,limit=1]

execute as @a[tag=panda] if entity @s[nbt={SelectedItem:{id: "minecraft:crossbow",tag: {CustomModelData:2}}}] unless entity @s[nbt={Inventory:[{"id":"minecraft:arrow"}]}] run item replace entity @s inventory.0 with minecraft:arrow 64
