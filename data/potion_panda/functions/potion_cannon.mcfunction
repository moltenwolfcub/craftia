scoreboard players enable @a[tag=potionPanda] potionPanda.potionCannon.get
scoreboard players enable @a[tag=potionPanda] potionPanda.potionCannon.setPotion

give @a[tag=potionPanda,scores={potionPanda.potionCannon.get=1..}] crossbow{Unbreakable:1b,display:{Name:'{"text": "Potion Panda Potion Cannon"}'},CustomModelData:2,Enchantments:[{id:"quick_charge",lvl:5}]}
scoreboard players set @a[tag=potionPanda,scores={potionPanda.potionCannon.get=1..}] potionPanda.potionCannon.get 0

execute at @e[scores={potionPanda.potionCannon.setPotion=0},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ 
execute at @e[scores={potionPanda.potionCannon.setPotion=1},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:22,Amplifier:4,Duration:100,ShowParticles:0b}],CustomPotionColor:852214,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=2},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:31,Duration:1200,ShowParticles:0b}],CustomPotionColor:1735202,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=3},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:15,Duration:100,ShowParticles:0b}],CustomPotionColor:2092,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=4},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:29,Duration:600,ShowParticles:0b}],CustomPotionColor:47257,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=5},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:30,Duration:200,ShowParticles:0b}],CustomPotionColor:6656151,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=6},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:12,Duration:1200,ShowParticles:0b}],CustomPotionColor:15111209,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=7},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:24,Duration:200,ShowParticles:0b}],CustomPotionColor:6257755,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=8},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:3,Amplifier:1,Duration:400,ShowParticles:0b}],CustomPotionColor:15325972,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=9},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:21,Amplifier:4,Duration:400}],CustomPotionColor:13194514,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=10},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:32,Amplifier:3,Duration:1200}],CustomPotionColor:1104666,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=11},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:17,Amplifier:4,Duration:120}],CustomPotionColor:4932148,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=12},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:7,Amplifier:2}],CustomPotionColor:5242880,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=13},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:6,Amplifier:2}],CustomPotionColor:16711680,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=14},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:14,Duration:400}],CustomPotionColor:6984350,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=15},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:8,Amplifier:2,Duration:600}],CustomPotionColor:3407616,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=16},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:25,Amplifier:4,Duration:200}],CustomPotionColor:8243621,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=17},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:26,Amplifier:9,Duration:1200}],CustomPotionColor:2529034,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=18},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:4,Amplifier:5,Duration:200}],CustomPotionColor:3347971,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=19},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:9,Duration:1200}],CustomPotionColor:3882776,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=20},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:16,Duration:1200}],CustomPotionColor:1279,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=21},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:19,Amplifier:4,Duration:1200}],CustomPotionColor:3304970,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=22},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:10,Amplifier:1,Duration:400}],CustomPotionColor:15401069,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=23},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:11,Duration:600}],CustomPotionColor:8720400,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=24},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:23,Amplifier:2}],CustomPotionColor:16711680,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=25},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:28,Duration:200}],CustomPotionColor:14671295,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=26},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:2,Amplifier:9,Duration:1200}],CustomPotionColor:5535616,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=27},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:1,Amplifier:1,Duration:1200}],CustomPotionColor:7710129,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=28},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:5,Amplifier:3,Duration:200}],CustomPotionColor:7208960,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=29},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:27,Amplifier:9,Duration:1200}],CustomPotionColor:10714435,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=30},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:13,Duration:600}],CustomPotionColor:6305,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=31},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:18,Amplifier:1,Duration:1200}],CustomPotionColor:3881787,display:{Name:'"Potion Cannon"'}}}}
execute at @e[scores={potionPanda.potionCannon.setPotion=32},tag=potionPanda,nbt={SelectedItem:{id:"minecraft:crossbow",tag:{CustomModelData:2}}}] at @e[type=arrow,distance=..2] run summon minecraft:potion ~ ~ ~ {Item:{id:"minecraft:splash_potion",Count:1,tag:{CustomPotionEffects:[{Id:20,Amplifier:2,Duration:80}],CustomPotionColor:1441792,display:{Name:'"Potion Cannon"'}}}}

execute as @e[type=minecraft:potion] at @s run data modify entity @s Motion set from entity @e[type=minecraft:arrow,distance=0,limit=1] Motion
execute as @e[type=minecraft:potion] at @s run kill @e[type=minecraft:arrow,distance=0,limit=1]

execute as @a[tag=potionPanda] if entity @s[nbt={SelectedItem:{id: "minecraft:crossbow",tag: {CustomModelData:2}}}] unless entity @s[nbt={Inventory:[{"id":"minecraft:arrow"}]}] run item replace entity @s inventory.0 with minecraft:arrow 64
